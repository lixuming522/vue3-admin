import{d as e,bO as a,r as t,I as s,o as l,a6 as n,g as o,f as u,m as r,w as d,a0 as i,ao as p,i as m,e as c,C as f,P as v,Q as _,n as y,F as b}from"./index.B4t5u4g2.js";import{a as h,E as j}from"./form-item.DdPYuD2D.js";import{E as g}from"./card.n-wYCw4F.js";import{a as x,E as k}from"./col.BDDcX608.js";/* empty css            */import{E as V}from"./button.qiQS9PPJ.js";import{E as I}from"./input.ZM6Y-xVU.js";import{E as w}from"./link.BTV8Guxl.js";import{u as C}from"./useStomp.D89I_Y66.js";import{E}from"./index.DR9Tseew.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./use-form-common-props.BhtZpN4B.js";import"./castArray.BpNWwZdh.js";import"./error.BnfJYaGU.js";import"./_Uint8Array.C8NwODWe.js";import"./_initCloneObject.DgFJMOwQ.js";import"./index.cjmyY-z9.js";import"./index.Css80OXZ.js";import"./event.BwRzfsZt.js";import"./index.UTYyCTEL.js";import"./index.BDNVLp-D.js";const S={class:"app-container"},O={class:"chat-messages-wrapper"},W={key:0,class:"chat-message__content"},A={class:"text-gray-600"},P={key:1},T=U(e({__name:"websocket",setup(e){const U=a(),T=t(void 0),q=t([]),F=t("亲爱的朋友们，系统已恢复最新状态。"),H=t("Hi, "+U.userInfo.username+" 这里是点对点消息示例！"),J=t("root"),{isConnected:L,connect:N,subscribe:Q,disconnect:X,client:Y}=C({debug:!0});function z(){N()}function B(){X()}function D(){Y.value&&Y.value.connected&&(Y.value.publish({destination:"/topic/notice",body:F.value}),q.value.push({sender:U.userInfo.username,content:F.value}))}function G(){Y.value&&Y.value.connected&&(Y.value.publish({destination:"/app/sendToUser/"+J.value,body:H.value}),q.value.push({sender:U.userInfo.username,content:H.value}))}return s((()=>L.value),(e=>{e?(Q("/topic/notice",(e=>{q.value.push({sender:"Server",content:e.body})})),Q("/user/queue/greeting",(e=>{const a=JSON.parse(e.body);q.value.push({sender:a.sender,content:a.content})})),q.value.push({sender:"Server",content:"Websocket 已连接",type:"tip"})):q.value.push({sender:"Server",content:"Websocket 已断开",type:"tip"})})),l((()=>{z()})),n((()=>{B()})),(e,a)=>{const t=w,s=I,l=V,n=x,C=E,N=k,Q=g,X=j,Y=h;return u(),o("div",S,[r(t,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/websocket.vue",type:"primary",target:"_blank",class:"mb-[20px]"},{default:d((()=>a[4]||(a[4]=[i(" 示例源码 请点击>>>> ")]))),_:1}),r(N,{gutter:10},{default:d((()=>[r(n,{span:12},{default:d((()=>[r(Q,null,{default:d((()=>[r(N,null,{default:d((()=>[r(n,{span:18},{default:d((()=>[r(s,{modelValue:m(T),"onUpdate:modelValue":a[0]||(a[0]=e=>p(T)?T.value=e:null),style:{width:"200px"}},null,8,["modelValue"]),r(l,{type:"primary",class:"ml-5",disabled:m(L),onClick:z},{default:d((()=>a[5]||(a[5]=[i(" 连接 ")]))),_:1},8,["disabled"]),r(l,{type:"danger",disabled:!m(L),onClick:B},{default:d((()=>a[6]||(a[6]=[i(" 断开 ")]))),_:1},8,["disabled"])])),_:1}),r(n,{span:6,class:"text-right"},{default:d((()=>[a[9]||(a[9]=i(" 连接状态： ")),m(L)?(u(),c(C,{key:0,type:"success"},{default:d((()=>a[7]||(a[7]=[i("已连接")]))),_:1})):(u(),c(C,{key:1,type:"info"},{default:d((()=>a[8]||(a[8]=[i("已断开")]))),_:1}))])),_:1})])),_:1})])),_:1}),r(Q,{class:"mt-5"},{default:d((()=>[r(Y,{"label-width":"90px"},{default:d((()=>[r(X,{label:"消息内容"},{default:d((()=>[r(s,{modelValue:m(F),"onUpdate:modelValue":a[1]||(a[1]=e=>p(F)?F.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),r(X,null,{default:d((()=>[r(l,{type:"primary",onClick:D},{default:d((()=>a[10]||(a[10]=[i("发送广播")]))),_:1})])),_:1})])),_:1})])),_:1}),r(Q,{class:"mt-5"},{default:d((()=>[r(Y,{"label-width":"90px"},{default:d((()=>[r(X,{label:"消息内容"},{default:d((()=>[r(s,{modelValue:m(H),"onUpdate:modelValue":a[2]||(a[2]=e=>p(H)?H.value=e:null),type:"textarea"},null,8,["modelValue"])])),_:1}),r(X,{label:"消息接收人"},{default:d((()=>[r(s,{modelValue:m(J),"onUpdate:modelValue":a[3]||(a[3]=e=>p(J)?J.value=e:null)},null,8,["modelValue"])])),_:1}),r(X,null,{default:d((()=>[r(l,{type:"primary",onClick:G},{default:d((()=>a[11]||(a[11]=[i("发送点对点消息")]))),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),r(n,{span:12},{default:d((()=>[r(Q,null,{default:d((()=>[f("div",O,[(u(!0),o(v,null,_(m(q),((e,a)=>(u(),o("div",{key:a,class:y(["tip"===e.type?"system-notice":"chat-message",{"chat-message--sent":e.sender===m(U).userInfo.username,"chat-message--received":e.sender!==m(U).userInfo.username}])},["tip"!=e.type?(u(),o("div",W,[f("div",{class:y({"chat-message__sender":e.sender===m(U).userInfo.username,"chat-message__receiver":e.sender!==m(U).userInfo.username})},b(e.sender),3),f("div",A,b(e.content),1)])):(u(),o("div",P,b(e.content),1))],2)))),128))])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-979c618b"]]);export{T as default};
